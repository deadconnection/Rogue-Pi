if (self.CavalryLogger) { CavalryLogger.start_js(["rCrXW"]); }

__d("MPageHeaderRight",["DOM","Stratcom"],(function(a,b,c,d,e,f,g,h){__p&&__p();function i(){return g.scry(document.body,"*","mChromeHeaderRight")[0]}f.setup=function(a){if(a){var b=i();b&&(g.setContent(b,a.node||""),h.listen("m:page:unload",null,function(event){h.removeCurrentListener(),g.setContent(b,"")}))}};f.getChromeHeaderRightContent=function(){var a=i();return a?Array.prototype.slice.call(a.childNodes):null}}),null);
__d("XTaggingCounterController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("https://m.facebook.com/composer/tagging/counter/",{event:{type:"Enum",required:!0,enumType:1}})}),null);
__d("MTaggingCounter",["AsyncSignal","XTaggingCounterController"],(function(a,b,c,d,e,f,g,h){a={logEvent:function(event,a){a=h.getURIBuilder().setEnum("event",event).getURI();new g(a).send()}};e.exports=a}),null);
__d("MFeedAdsGapRuleViolationDetection",["Banzai","BanzaiODS","CSS","DataAttributeUtils","DOM","ge","isEmpty"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();var n="ei",o="qid",p="gap rule violation",q="non violating ads gap",r="non violating ego gap",s="first position violation",t="feed load",u="spacing invalidation",v="ego_pymk",w="ego_other",x=[],y=[],z=[],A=[],B={},C={},D={},E=[];a={registerFeedStories:function(a){__p&&__p();var b=l(a.containerID);if(b==null||b.childNodes==null)return;B=babelHelpers["extends"]({},a.demoAdChecks,B);D=a.egoGapRule;E=a.invalidateEgo?a.egoStories:{};var c=this._getStoriesFromContainer(b);a.isLoggingEnabled&&c.length!==0&&this._logFeedLoad();x=x.concat(c);for(var d in a.minGaps)Object.prototype.hasOwnProperty.call(a.minGaps,d)&&(C[d]=a.minGaps[d]);m(B)&&(a.isLoggingEnabled&&this._checkFirstPosViolation(a,b),(a.invalidateEgo||a.isLoggingEnabled||a.isGapRuleInvalidationEnabled)&&this._checkGapRuleViolation(a))},_getStoriesFromContainer:function(a){var b=[];for(var c=0;c<a.childNodes.length;c++){var d=this._convertStoryNodeToObject(a.childNodes[c]);d!==null&&b.push(d)}return b},_convertStoryNodeToObject:function(a){var b=a.getAttribute("data-dedupekey"),c=[j.getDataFt(a)];if(c[0]==null)return null;var d=JSON.parse(c[0]);return{dataFTArray:c,dedupKey:b,isSponsored:!!d[n],isEgoPymk:E[b]===v,isEgoOther:E[b]===w,height:a.offsetHeight,qid:parseInt(d[o],10),nodeID:a.id}},_checkFirstPosViolation:function(a,b){if(x.length>0&&x[0].isSponsored){b={ftArray:x[0].dataFTArray,qid:x[0].qid,nodeid:x[0].nodeID};a.isLoggingEnabled&&!(x[0].dedupKey in A)&&(this._logFirstPosViolation(b),A[x[0].dedupKey]=b)}},_getMinGap:function(a,b,c){a=Math.min(a?a:Number.MAX_VALUE,b?b:Number.MAX_VALUE);return a!==Number.MAX_VALUE?a:c},_getStoryDedupKeysJSONString:function(a,b){var c=[];for(var a=a;a<=b;a++)c.push(x[a].dedupKey);return JSON.stringify(c)},_getStoryDedupKeys:function(){return x.map(function(a){return a.dedupKey})},_checkGapRuleViolation:function(a){__p&&__p();var b=null,c=null,d=null;for(var e=0;e<x.length;e++){var f=x[e];if(f.isSponsored){var g=!1,h=!1;if(b!==null){var i=e-c,j=null,k;b===c?k=this._getMinGap(C[d.dedupKey],C[f.dedupKey],a.defaultMinGap):k=this._getMinGapBetweenStories(d,f);var l;i<k?(j=p,l=c):(j=q,l=b);a.isLoggingEnabled&&((!(f.dedupKey in y)||y[f.dedupKey].event_type!==j)&&(this._logGapEvent(j,l,e),y[f.dedupKey]={event_type:j}));a.isGapRuleInvalidationEnabled&&j==p&&(this._invalidateGapRuleViolatedAd(d,f),g=!0,x.splice(e--,1))}!g&&!h&&(b=e,c=e,d=f)}if(a.invalidateEgo&&(f.isEgoPymk||f.isEgoOther)){l=!1;if(c!==null){i=e-c;k=this._getMinGapBetweenStories(d,x[e]);if(i<k){l=!0;j=k-i;g=-1;for(var h=e+1;h<x.length;h++){if(x[h].isSponsored||x[h].isEgoPymk||x[h].isEgoOther)break;else j--;if(j===0){g=h;break}}g>0?this._swapAndLogEgo(e,h):(this._invalidateAndLogEgo(e),e--)}else a.shouldLogEgo&&!z[f.dedupKey]&&(z[f.dedupKey]=!0,this._logGapEvent(r,c,e))}l||(c=e,d=f)}}},_getMinGapBetweenStories:function(a,b){__p&&__p();var c;if(a.isSponsored||a.isEgoOther)c="ad";else if(a.isEgoPymk)c="pymk";else return 0;if(b.isSponsored||b.isEgoOther)a="ad";else if(b.isEgoPymk)a="pymk";else return 0;return D[c+"_"+a]},_swapAndLogEgo:function(a,b){this._shiftEgoBelowOrganicStory(x[a].nodeID,x[b].nodeID);var c=x[a];x.splice(a,1);x.splice(b,0,c);h.bumpEntityKey("m_feed_ego_invalidation","swap")},_shiftEgoBelowOrganicStory:function(a,b){a=l(a);b=l(b);a&&b&&k.insertAfter(b,a)},_invalidateAndLogEgo:function(a){var b=l(x[a].nodeID);b&&i.hide(b);x.splice(a,1);h.bumpEntityKey("m_feed_ego_invalidation","invalidate")},_logFirstPosViolation:function(a){var b={ft:a.ftArray[0],event_type:s,intValues:{qid:a.qid}};a.error_msg&&(b.error_msg=a.error_msg);g.post("feed_ads_gap_rule_violation",b)},_logGapEvent:function(a,b,c){if(b===null)return;var d=x[b],e=x[c],f=0;for(var h=b+1;h<c;h++)f+=x[h].height;h={ft_A:d.dataFTArray[0],ft_B:e.dataFTArray[0],event_type:a,intValues:{dist:c-b,pdist:f,pos:c+1,qid_A:d.qid,qid_B:e.qid},strValues:{previous_unit_type:this._getUnitTypeForLogging(d),unit_type:this._getUnitTypeForLogging(e)},dedup_keys:this._getStoryDedupKeysJSONString(b,c)};g.post("feed_ads_gap_rule_violation",h)},_getUnitTypeForLogging:function(a){if(a.isSponsored)return"ad";else if(a.isEgoPymk)return"pymk";else if(a.isEgoOther)return"ego_other";return null},_logFeedLoad:function(){var a={event_type:t};g.post("feed_ads_gap_rule_violation",a)},_invalidateGapRuleViolatedAd:function(a,b){var c=l(b.nodeID);c&&i.hide(c);c={ft_array_A:a.dataFTArray[0],ft_array_B:b.dataFTArray[0],event_type:u};g.post("feed_ads_gap_rule_violation",c)}};e.exports=a}),null);
__d("MFeedErrorDetection",["Banzai","DataAttributeUtils"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={};function j(event,a,b,c){var d={event:event,shouldLogDetail:a,site:"mtouch"};a&&(d.intValues=b,d.normalValues=c);g.post("feed_error_detection",d,{delay:0})}a={registerFeedStory:function(a){__p&&__p();var b=a.feedObjectElement;a=a.shouldLogDetail;if(!b)return;var c=h.getDataFt(b);b=b.getAttribute("data-dedupekey");if(!b||!c)return;if(i[b]){var d=void 0;a&&(d={dedupKey:b,ft_A:c,ft_B:i[b]});j("mtouch_duplicate_stories",a,{},{dup_field:d||{}})}else i[b]=c}};e.exports=a}),null);
__d("XPymkFunnelLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("https://m.facebook.com/pymk/funnel_logging/",{event_ts:{type:"Int",required:!0},query_id:{type:"Int"},candidate_id:{type:"Int"},signature:{type:"Int"},loc:{type:"String",required:!0},ref:{type:"String"},action:{type:"Enum",required:!0,enumType:1}})}),null);
__d("MPymkFunnelLogger",["DOM","MRequest","Stratcom","XPymkFunnelLoggingController"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();a={listenToProfileClick:function(a,b,c){var d=a.getAttribute("data-pymk-id"),e=a.getAttribute("data-pymk-loc"),f=a.getAttribute("data-signature"),h=[];h.push(g.listen(c,"click",null,function(){this.logClick(d,f,e)}.bind(this)));h.push(g.listen(b,"click",null,function(){this.logClick(d,f,e)}.bind(this)));i.listen("m:page:unload",null,function(){i.removeCurrentListener();while(h.length)h.pop().remove()})},logImpression:function(a,b,c){this._logEvent(a,"impression",b,c)},logXOut:function(a,b,c){this._logEvent(a,"hide",b,c)},logClick:function(a,b,c){this._logEvent(a,"click",b,c)},logAdd:function(a,b,c){this._logEvent(a,"add",b,c)},_logEvent:function(a,event,b,c){a=j.getURIBuilder().setInt("candidate_id",a).setInt("signature",b).setInt("event_ts",Math.floor(Date.now()/1e3)).setEnum("action",event).setString("loc",c).getURI();new h(a).send()}};e.exports=a}),null);
__d("MPageTitle",[],(function(a,b,c,d,e,f){f.setTitle=function(a){document.title=a}}),null);
__d("LocalNewsExperimentEntryPoint",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({QP:"qp",STORY_INTERACTION:"story_interaction"})}),null);
__d("MParent",["Stratcom"],(function(a,b,c,d,e,f,g){a={bySigil:function(a,b){a=a;while(a&&a!==document&&!(a instanceof DocumentFragment)&&!g.hasSigil(a,b))a=a.parentNode;return a instanceof HTMLElement?a:null}};e.exports=a}),null);
__d("MLiveData",["MDeepCopy","Stratcom","eventsMixinDeprecated"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j={},k={},l,m={},n,o;function p(a){"use strict";this.$1=a}p.prototype.getData=function(){"use strict";return g(j[this.$1]||{})};i(p,["change"]);a={_set:function(a,b,c){var d=j[a],e=d&&d.timestamp&&b.timestamp&&d.timestamp>b.timestamp;if(o||e)return;!d||c?j[a]=b:Object.assign(j[a]||{},b);k[a]||(k[a]=new p(a));k[a].invoke("change")},update:function(a,b){this._set(a,b,!1)},set:function(a,b){this._set(a,b,!0)},get:function(a){__p&&__p();l||(l=h.listen("m:page:render:cache:start",null,function(){o=!0,h.listen("m:page:iui:response:complete",null,function(){o=!1,h.removeCurrentListener(),Object.keys(m).forEach(function(a){var b=j[a];b&&Object.keys(b).length&&k[a].invoke("change")})})}));m[a]||(m[a]=!0);n||(n=h.listen("m:page:unload",null,function(){m={}}));k[a]||(k[a]=new p(a));return k[a]}};e.exports=a}),null);
__d("MUFIRequest",["ChannelClientID","ClientIDs","MLiveData","MRequest","MURI","Stratcom"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();var m=k.getHashPrefixRegex(),n={};function a(a){a=new k(a);var b=a.getFragment();m.test(b)&&(a=new k(b.replace(m,"https://m.facebook.com/")));return a.setProtocol(null).setDomain(null).setFragment(null)}function b(a,b,c,d,e){__p&&__p();b&&(b.request_id=null,i.update(a,b));n[a]&&n[a].abort();c.addQueryData("client_id",h.getNewClientID());c.addQueryData("session_id",g.getID());b=new j(c.toString());b.listen("finally",function(){n[a]=null});b.listen("postprocess",function(){l.invoke("m:ajax:complete")});if(e)for(var f in e)b.listen(f,e[f]);b.setAutoRetry(!0);d&&b.setData(d);n[a]=b;b.send()}e.exports={getURI:a,send:b}}),null);
__d("PagesEventWatchStatusSelectorType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({WATCH_STATUS_GOING_SIGIL:"watch-status-going",WATCH_STATUS_INTERESTED_SIGIL:"watch-status-interested",WATCH_STATUS_NOT_GOING_SIGIL:"watch-status-not-going"})}),null);
__d("XFeedChainingAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("https://m.facebook.com/feed/pivot/chaining/",{share_id:{type:"String"},ufi_node_id:{type:"String"},ft_id:{type:"String"},entry_point:{type:"Enum",enumType:1}})}),null);
__d("MFeedChaining",["BanzaiLogger","DOM","XFeedChainingAsyncController","LocalNewsExperimentEntryPoint","MParent","MUFIRequest","PagesEventWatchStatusSelectorType","Stratcom","SubscriptionsHandler","XAsyncRequest","ge"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";__p&&__p();var r="suggestion-chain-unit",s="ufi-inline-like",t="empty-suggestion-unit",u="has-chaining-unit",v=!1;a={_isSuccessfulUnit:function(a){return!n.hasSigil(a,t)},addChainingUnit:function(a,b){__p&&__p();a=q(a);if(!a)return;var c=k.bySigil(a,"story-div");if(!c)return;var d=c.nextElementSibling;if(!(d&&n.hasSigil(d,r))&&this._isSuccessfulUnit(b)){h.insertAfter(c,b);d=h.scry(a,"*",s);d=d.length&&d[0];c=d&&d.getAttribute("href");if(c){b=l.getURI(c);b.removeQueryData("chainingEnabled");d.setAttribute("href",b.toString())}}},addLinkChaining:function(a,b){a=q(a);if(!a)return;a=k.bySigil(a,"story-div");if(!a)return;var c=n.hasSigil(a,u);c||(h.insertAfter(a,b),n.addSigil(a,u),g.log("MTouchLinkPivotsLoggerConfig",{event:"impression"}))},addEventChaining:function(a,b){a=q(a);if(!a)return;a=k.bySigil(a,"story-div");if(!a)return;var c=n.hasSigil(a,u);c||(h.insertAfter(a,b),n.addSigil(a,u))},registerClickHandler:function(a){var b=h.scry(a.story,"*","m-feed-story-attachments-element")[0];if(!b)return;var c=new o();c.addSubscriptions(h.listen(b,"click",null,function(){var b=i.getURIBuilder().setString("share_id",a.share_id.toString()).setString("ufi_node_id",a.ufi_node_id.toString()).setString("ft_id",a.ft_id).setEnum("entry_point",j.STORY_INTERACTION).getURI();new p(b).send();g.log("MTouchLinkPivotsLoggerConfig",{event:"request"})}),n.listen("m:page:unload",null,function(){c.release()}))},registerEventRSVPButtonClickHandler:function(a){var b=h.scry(a.story,"*","m-feed-story-attachments-element")[0];if(!b)return;n.listen("click",m.WATCH_STATUS_INTERESTED_SIGIL+a.share_id,function(b){b=i.getURIBuilder().setString("share_id",a.share_id.toString()).setString("ufi_node_id",a.ufi_node_id.toString()).setString("ft_id",a.ft_id).getURI();new p(b).send()})},listenClickEventsOnChainingUnit:function(){if(v)return;n.listen("click","link-pivots-story",function(event){var a=null;event.getNode("link-pivots-share-link")?a="share":event.getNode("link-pivots-save-link")?a="save":event.getNode("link-pivots-attachment")&&(a="outbound_click");g.log("MTouchLinkPivotsLoggerConfig",{event:a})});v=!0}};e.exports=a}),null);
__d("MAsyncPageLoadWithGraphSearch",["CSS","Stratcom","csx","cx"],(function(a,b,c,d,e,f,g,h,i,j){var k="graph-search-entry-point";a={pageLoad:function(a){h.invoke("setSearchText",k,{title:a.searchTitle||""}),h.invoke("setCurrentProfileID",k,{profileID:a.currentProfileID})}};e.exports=a}),null);
__d("InitMAjaxify",["MLegacyDataStore","MLinkHack","MRequest","Stratcom","MAjaxify"],(function(a,b,c,d,e,f,g,h,i,j,k){__p&&__p();var l={};function m(a){l[a]=l[a]||new RegExp("(^|\\s+)"+a+"(\\s+|$)");return l[a]}function a(a,b){a=a.className||"";return a.match(m(b))}j.listen("click","ajaxify",function(event){__p&&__p();event.prevent();var a=event.getNode("ajaxify"),b=a.getAttribute("data-ajaxify-class"),c=a.getAttribute("data-confirm-text");if(c&&!confirm(c))return;var d=g.get(a);if(d.loading)return;d.loading=!0;c=function(){d&&(d.loading=d.request=null),d=null};var e=function(){j.invoke("m:ajax:complete")};c={"finally":c,postprocess:e};e=h.remove(a);var f=a.getAttribute("data-ajaxify-href")||a.getAttribute("href");if(a.getAttribute("data-method")==="post"){var l=new i(f);l.setAutoRetry(!0);d.request=l;k.ajaxify(event.getRawEvent(),a,l,b,null)}else k.link(event.getRawEvent(),f,b,c);e&&h.add(a)})}),null);
__d("MTaggingCounterEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GEO_PANEL_LOAD:"geo_panel_load",GEO_PANEL_ACCEPT:"geo_panel_accept",GEO_PANEL_DENY:"geo_panel_deny",GEO_PANEL_FAIL:"geo_panel_fail",GEO_PANEL_SUCCESS:"geo_panel_success",GEO_POPUP_LOAD:"geo_popup_load",GEO_POPUP_FAIL:"geo_popup_fail",GEO_POPUP_SUCCESS:"geo_popup_success"})}),null);
__d("ViewerLocationSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AURA:"aura",GET_PARAM:"get_param",INTERN_TOOL:"intern_tool",LAST_LOCATION:"last_location",LOGIN:"login",PLACEBOOK:"placebook",PLACES_FQL:"places_fql",TEST:"test",MSITE_LOCATION_PROMPT:"msite_location_prompt",MSITE_PERSISTENT_LOCATION:"msite_persistent_location",MSITE_PLACES:"msite_places",MSITE_UNKNOWN:"msite_unknown",CORE_GQL_MUTATION:"core_graphql_mutation",MULTIFEED_PARAM:"multifeed_param",LOCATION_PROFILE_FRAMES:"location_profile_frames",PR_LOCATION_EFFECTS:"pr_location_effects",MESSENGER_LIVE_LOCATION:"messenger_live_location",VISIT_STATE:"visit_state",WIFI_FINGERPRINT:"wifi_fingerprint",INFERRED_WIFI:"inferred_wifi",INSTA_GEO_IMPLICIT:"insta_geo_implicit",AURA_TOO_FAST:"aura_too_fast",AURA_TOO_OLD:"aura_old",AURA_FAILED_MGI:"aura_failed_mgi",SEARCH:"search"})}),null);
__d("XPlacesUpdateLocationController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("https://m.facebook.com/places/location_update/",{json_location:{type:"String"},source:{type:"Enum",defaultValue:"msite_unknown",enumType:1}})}),null);
__d("MLocationPrompt",["DOM","MRequest","Stratcom","WebStorage","XPlacesUpdateLocationController","MTaggingCounter","MTaggingCounterEvent","ViewerLocationSource"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o=["latitude","longitude","accuracy","altitude","altitudeAccuracy","heading","speed"],p={enableHighAccuracy:!0,timeout:6e4,maximumAge:3e5},q=6e4;r.init=function(a,b,c,d){"use strict";return new r(a,b,c,d)};r.getCoords=function(){"use strict";return r.coords};r.isLocationAvailable=function(){"use strict";return r.locationAvailable};function r(a,b,c,d){"use strict";this.lastUpdateTime=0;this.container=a;this.question=b;this.loading=c;this.errored=d;a=j.getLocalStorage();a&&a.getItem(r.GEOLOCATION_KEY)==="1"?this.$1():(r.locationAvailable=!1,g.show(this.question),g.hide(this.loading),g.hide(this.errored),g.show(this.container),i.invoke("m:jewel-set:notifications-jewel:refresh-flyout"),l.logEvent(m.GEO_PANEL_LOAD));this.listeners=[i.listen("click","accept-location",this.$2.bind(this)),i.listen("click","deny-location",this.$3.bind(this)),i.listen("m:page:unload",null,this.$4.bind(this))]}r.prototype.clearWatch=function(){"use strict";if(!this.watchID)return;navigator.geolocation.clearWatch(this.watchID);this.watchID=null};r.prototype.$2=function(){"use strict";l.logEvent(m.GEO_PANEL_ACCEPT),this.$1(!0)};r.prototype.$1=function(a){"use strict";__p&&__p();r.locationAvailable=!0;var b=j.getLocalStorage();b&&b.setItem(r.GEOLOCATION_KEY,"1");g.show(this.container);g.hide(this.question);g.show(this.loading);g.hide(this.errored);i.invoke("m:jewel-set:notifications-jewel:refresh-flyout");var c=setTimeout(this.$5,p.timeout);this.watchID=navigator.geolocation.watchPosition(function(b){a&&l.logEvent(m.GEO_PANEL_SUCCESS),clearTimeout(c),this.$6(b)}.bind(this),function(b){a&&l.logEvent(m.GEO_PANEL_FAIL),clearTimeout(c),this.$5(b)}.bind(this),p);i.invoke(r.STRATCOM_ACCEPT)};r.prototype.$3=function(){"use strict";r.locationAvailable=!1,l.logEvent(m.GEO_PANEL_DENY),g.hide(this.container),i.invoke("m:jewel-set:notifications-jewel:refresh-flyout"),i.invoke(r.STRATCOM_DENY)};r.prototype.$6=function(a){"use strict";__p&&__p();r.locationAvailable=!0;if(a){var b={},c;for(var d=0;d<o.length;d++)c=o[d],a.coords[c]&&(b[c]=a.coords[c]);a.timestamp&&(b.timestamp=a.timestamp/1e3);this.$7(JSON.stringify(b));g.hide(this.container);r.coords=b;i.invoke("m:jewel-set:notifications-jewel:refresh-flyout");i.invoke(r.STRATCOM_UPDATE,null,{position:a})}};r.prototype.$5=function(a){"use strict";__p&&__p();r.locationAvailable=!1;this.clearWatch();var b=j.getLocalStorage();b&&b.setItem(r.GEOLOCATION_KEY,"0");g.show(this.container);g.hide(this.question);g.hide(this.loading);g.show(this.errored);i.invoke("m:jewel-set:notifications-jewel:refresh-flyout");i.invoke(r.STRATCOM_FAIL,null,{error:a});l.logEvent(m.GEO_PANEL_FAIL)};r.prototype.$7=function(a){"use strict";var b=Date.now();if(b-this.lastUpdateTime>q){this.lastUpdateTime=b;b=k.getURIBuilder().setString("json_location",a).setEnum("source",n.MSITE_LOCATION_PROMPT).getURI();new h(b).setMethod("POST").send()}};r.prototype.$4=function(){"use strict";if(!this.listeners)return;for(var a=0;a<this.listeners.length;a++)this.listeners[a].remove();this.listeners=[]};Object.assign(r,{STRATCOM_ACCEPT:"MLocationPrompt/accept",STRATCOM_DENY:"MLocationPrompt/deny",STRATCOM_UPDATE:"MLocationPrompt/update",STRATCOM_FAIL:"MLocationPrompt/fail",GEOLOCATION_KEY:"authorizeGeolocation",locationAvailable:undefined});e.exports=r}),null);
__d("MModalDialogLink",["MLegacyDataStore","Stratcom","MModalDialog","MPageController"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k="dialog-link";h.listen("click",k,function(a){__p&&__p();a.prevent();var b=a.getNode(k);switch(b.getAttribute("rel")){case"dialog":i.open(g.get(a.getNode(k)).dialogURI,function(a){a&&(a.redirectURI?j.forceLoad(a.redirectURI):a.refresh&&j.reload())},b.getAttribute("data-loading-title"));break;case"dialog-close":i.close({redirectURI:g.get(a.getNode(k)).dialogURI,goBack:!0});break;case"dialog-close-and-navigate":i.close({redirectURI:g.get(a.getNode(k)).dialogURI,goBack:!1});break;case"dialog-close-and-refresh":i.close({refresh:!0,goBack:!0});break}})}),null);
__d("MMoreItemAutomatic",["MLocationPrompt","MPageCache","MPageControllerPath","MRequest","MRequestGateway","MRequestTypes","MResponseData","MStopNGo","MURI","MViewport","Stratcom","Vector","throttle"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){__p&&__p();function t(a){"use strict";__p&&__p();this.$27=function(){this.$4?this.$28():!this.$5&&!this.$17&&this.$29()}.bind(this);this.$3=a.href;this.$21=a.sendGeolocation;this.$15=a.proximity_pages||7;this.$8=a.logger_id;this.$9=a.logger_name;this.$7=a.load_first_immediately;this.$18=a.retryOnError;this.$1=a.addToCache;this.$2=a.alwaysProcess;this.$20=a.scrollPrefetchThrottleFreq||0;this.$4=a.insertWhileScrolling;this.$17=!1;this.$16=!0;this.$12=0;this.$11=!1;this.$5=!1;this.$23=0;this.$6=null;this.$10=null;this.$13=!1;this.$14=null;var b=document.getElementById(a.id);b?(this.$23=r.getPos(b).y,this.$10=b,this.$13=a.persist_on_reload,this.$24()):this.uninstall()}t.prototype.isElementVisible=function(){"use strict";__p&&__p();if(!this.$25())return!1;void 0;var a=this.$10;if(a&&"getBoundingClientRect"in a){var b=a.getBoundingClientRect(),c=b.width/10,d=b.height/10,e=b.left,f=b.right,g=b.top;b=b.bottom;var h=!1;while(!h&&e<=f&&g<=b){e=Math.round(e+c);g=Math.round(g+d);var i=document.elementFromPoint(e,g);h=a.contains(i)}i=h}else{c=r.getPos(a).y;d=c+r.getDim(a).y;e=p.getScrollTop();f=e+p.getUseableHeight();i=c<=f&&d>=e}return i};t.prototype.$26=function(){"use strict";var a=this.$10;a&&(this.$23-p.getScrollTop()<0&&(q.invoke("m:more_item_automatic:items_visible",this.$8),this.uninstall()))};t.prototype.$28=function(){"use strict";!this.$5?(this.$16=!0,this.isElementVisible()&&q.invoke("m:more_item_automatic:spinner_visible",this.$8,this.$9),!this.$17?this.$29():this.$30()):this.$26()};t.prototype.$31=function(){"use strict";this.$5||(this.$16=!1)};t.prototype.$32=function(){"use strict";!this.$17&&(this.$7||this.isElementVisible())&&(this.$33(),this.$7=!1)};t.prototype.$24=function(){"use strict";!this.$17&&(this.$7||this.isElementVisible())&&(this.$33(),this.$7=!1),this.$6=[],this.$20>0&&this.$6.push(q.listen(["m:page:render:complete","scroll"],null,s.withBlocking(this.$27,this.$20,this))),this.$4||this.$6.push(n.listen("go",this.$28.bind(this)),n.listen("stop",this.$31.bind(this))),this.$6.push(q.listen("m:ajax:complete",null,this.$32.bind(this)))};t.prototype.$34=function(){"use strict";var a=this.$10;if(a){var b=document;b=b.documentElement;if(b)return b.contains(a)}return!1};t.prototype.uninstall=function(){"use strict";while(this.$6&&this.$6.length)this.$6.pop().remove();this.$17=!1;this.$14=null;this.$10=null;this.$13=!1;clearTimeout(this.$19);clearTimeout(this.$22)};t.prototype.withinProximity=function(){"use strict";var a=this.$10;return!!a&&r.getPos(a).y-p.getScrollTop()<p.getUseableHeight()*(1+this.$15)};t.prototype.$30=function(){"use strict";var a=this.$14;a&&(this.$34()&&(a.process(),this.$1&&h.addCachedIUIResponse(i.getRequestPath(),a)),q.invoke("m:more_item_automatic:items_loaded",this.$8,this.$9),this.$5=!0)};t.prototype.$25=function(){"use strict";var a=this.$10;return!a||!a.offsetHeight?!1:!0};t.prototype.$29=function(){"use strict";(this.isElementVisible()||this.$25()&&p.getScrollTop()>100&&this.withinProximity())&&this.$33()};t.prototype.$33=function(){"use strict";__p&&__p();var a=g.getCoords();this.$21&&a&&(this.$3=new o(this.$3).addQueryData("lat",a.latitude).addQueryData("long",a.longitude).toString());a=new j(new o(this.$3).toString());this.$2?a.setType(l.INDEPENDENT):a.setType(l.DEPENDENT);a.setAutoProcess(!1);var b=[],c=!1,d=function(){!c&&b.length&&(c=!0,b.shift().process())};this.$18&&(a.setTimeout(k.ERROR_TIMEOUT),a.listen("error",function(a,b){this.$19=setTimeout(function(){navigator.onLine&&(b.reset(),b.addData({is_retry:1}),b.sendAfterProcessing())},t.TRY_AGAIN_DELAY)}));a.listen("response",function(a){__p&&__p();a=new m(a);a.listen("complete",function(){c=!1,d()});if(a.isPagelet()){b.push(a);d();return}c=!0;this.$14=a;this.$16&&this.$30()}.bind(this));a.send();this.$17=!0};t.prototype.getPersistOnReload=function(){"use strict";return this.$13};t.TRY_AGAIN_DELAY=1500;e.exports=t}),null);
__d("InitMMoreItemAutomatic",["MMoreItemAutomatic","Stratcom"],(function(a,b,c,d,e,f,g,h){var i=void 0;a=function(a){i||(i={},h.listen("m:page:loading",null,function(a){for(var b in i)i[b].getPersistOnReload()||(i[b].uninstall(),delete i[b])}));var b=a.id;i[b]&&i[b].uninstall();i[b]=new g(a)};f.main=a}),null);
__d("MMoreItemAutomaticLogger",["Stratcom","MarauderLogger"],(function(a,b,c,d,e,f,g,h){__p&&__p();function i(a,b){this._loggerName=a,this._loggerID=b,this._listeners=[g.listen("m:page:unload",null,this._pageUnload.bind(this)),g.listen("m:more_item_automatic:spinner_visible",null,this._onSpinnerVisible.bind(this)),g.listen("m:more_item_automatic:items_loaded",null,this._onItemsLoaded.bind(this)),g.listen("m:more_item_automatic:items_visible",null,this._onItemsVisible.bind(this))]}Object.assign(i.prototype,{_loggerName:"",_loggerID:"",_spinnerUnloaded:!1,_spinnerVisible:!1,_spinnerStartTime:null,_cleanup:function(){while(this._listeners&&this._listeners.length)this._listeners.pop().remove()},_pageUnload:function(){this._spinnerVisible&&(this._spinnerUnloaded=!0,this._logLoadingSpinnerTime(this._getTimeSpan(),!0)),this._cleanup()},_onSpinnerVisible:function(event){event.getPath()[0]===this._loggerID&&!this._spinnerVisible&&(this._spinnerVisible=!0,this._spinnerStartTime=Date.now())},_onItemsLoaded:function(event){event.getPath()[0]===this._loggerID&&!this._spinnerUnloaded&&(this._logLoadingSpinnerTime(this._getTimeSpan(),!1),this._spinnerVisible=!1,this._spinnerStartTime=null)},_onItemsVisible:function(event){event.getPath()[0]===this._loggerID&&this._logItemsVisible()},_getTimeSpan:function(){return this._spinnerVisible?Date.now()-this._spinnerStartTime:0},_logLoadingSpinnerTime:function(a,b){h.log("m_more_items_automatic_spinner_visible_time",undefined,{name:this._loggerName,id:this._loggerID,visible_time:a,spinner_unloaded:b})},_logItemsVisible:function(){h.log("m_more_items_automatic_fetched_items_visible",undefined,{name:this._loggerName,id:this._loggerID}),this._cleanup()}});i.init=function(a,b){new i(a,b)};e.exports=i}),null);
__d("MAsyncThrobber",["DOM","MLoadingIndicator","Stratcom","destroyOnUnload"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k="async-throbber";function a(a){"use strict";this.$1=h.init(a);if(!this.$1)return;this.$2=[i.listen("m:ajax:saving:start",null,this.$3.bind(this)),i.listen("m:ajax:saving:complete",null,this.$4.bind(this))];j(this.$5.bind(this))}a.prototype.$3=function(event){"use strict";var a=event&&event.getData();a&&g.scry(a,"*",k)&&this.$1.willStartAnimation()};a.prototype.$4=function(event){"use strict";var a=event&&event.getData();a&&g.scry(a,"*",k)&&this.$1.willPauseAnimation()};a.prototype.$5=function(){"use strict";while(this.$2&&this.$2.length)this.$2.pop().remove();this.$1=null};e.exports=a}),null);
__d("MScrollAreaHelper",["MLegacyDataStore"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,b){__p&&__p();b=b||10;var c;while(b>0&&a&&a.nodeType===1){c=g.get(a);if(c&&c.scrollArea)return c.scrollArea;a=a.parentNode;b--}return null}f.findScrollArea=a}),null);
__d("MTimestamp",["setTimeoutAcrossTransitions","MLegacyDataStore","DOM","Stratcom","fbt"],(function(a,b,c,d,e,f,g,h,i,j,k){__p&&__p();var l=2e4,m=60,n=3600,o;function p(){var a=Math.floor(Date.now()/1e3),b=i.scry(document,"abbr","timestamp");for(var c=0,d=b.length;c<d;++c){var e=h.get(b[c]);e=q(a-e.time||0,e["short"],e.forceseconds);e&&(b[c].innerText=e)}clearTimeout(o);o=g(p,l)}function q(a,b,c){__p&&__p();if(a>12*n)return null;if(a<2*m&&c)return k._({"*":"{number} seconds ago"},[k._param("number",a,[0])]);if(a<2*m)return k._("Just now");if(a<n){c=Math.floor(a/m);return b?k._({"*":"{number} min"},[k._param("number",c,[0])]):k._({"*":"{number} minutes ago"},[k._param("number",c,[0])])}c=Math.floor(a/n);if(b)return k._("{number} hr",[k._param("number",c)]);else if(c==1)return k._("1 hour ago");return k._({"*":"{number} hours ago"},[k._param("number",c,[0])])}p();j.listen("m:update-timestamps",null,function(){p()});f.renderTimestamp=q}),null);
__d("TouchEventType",[],(function(a,b,c,d,e,f){a="touchend";b="touchstart";e.exports={END:a,START:b}}),null);
__d("isNodeWithinRect",[],(function(a,b,c,d,e,f){function a(a,b){if(!a.getBoundingClientRect)return!1;a=a.getBoundingClientRect();return a.bottom>=b.top&&a.top<=b.bottom&&a.right>=b.left&&a.left<=b.right}e.exports=a}),null);
__d("uuid",[],(function(a,b,c,d,e,f){function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0;a=a=="x"?b:b&3|8;return a.toString(16)})}e.exports=a}),null);