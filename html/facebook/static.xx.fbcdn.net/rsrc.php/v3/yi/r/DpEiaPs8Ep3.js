if (self.CavalryLogger) { CavalryLogger.start_js(["6u57\/"]); }

__d("MAjaxifyFormTypes",[],(function(a,b,c,d,e,f){e.exports={PAGELOAD:"pageload",NOCACHE:"nocache",CACHE:"cache"}}),null);
__d("MAjaxify",["CSS","MLegacyDataStore","DOM","ErrorUtils","LoadingIndicator","MAjaxifyFormTypes","MHistory","MPageCache","MPageControllerPath","MRequest","MRequestTypes","Stratcom","URI"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){__p&&__p();var t={postprocess:function(a){n.addCachedIUIResponse(o.getRequestPath(),a.response)}};function u(a,b){return(" "+a.className+" ").indexOf(" "+b+" ")>-1}function v(a,b){while(a&&!u(a,b))a=a.parentNode;return a}function w(event,a,b,c,d){__p&&__p();c=c||"async_elem";event&&(event.preventDefault(),event.stopPropagation());if(a){var e=v(a,c)||a,f=c+"_saving";if(u(e,f))return!1;g.conditionClass(e,c+"_preprocess",!0);a=function(a){g.conditionClass(e,c,!a),g.conditionClass(e,f,a),r.invoke(a?"m:ajax:saving:start":"m:ajax:saving:complete",null,e)};b.listen("start",a.bind(null,!0));b.listen("finally",a.bind(null,!1))}b.setType(q.INDEPENDENT);for(var a=0,h=d.length;a<h;a++){var i=d[a];for(var j in i)b.listen(j,i[j])}b.send();return!1}var x=["input","textarea","select","button","object"];function y(a,b){for(var c=0;c<x.length;c++){var d=i.scry(a,x[c]);for(var e=0;e<d.length;e++){var f=h.get(d[e]);b?(f.wasDisabled=d[e].disabled,d[e].disabled=!0):d[e].disabled=f.wasDisabled}}}function z(a,b,c){__p&&__p();this.start=function(){if(c)return;y(a,!0)},this.process=function(b){if(c)return;y(a,!1);a.reset();if(document.createEvent&&a.dispatchEvent){b=document.createEvent("HTMLEvents");b.initEvent("reset",!0,!0);a.dispatchEvent(b)}},this.error=this.fail=function(c){y(a,!1),b==l.PAGELOAD&&k.hide()},this.postprocess=function(a){b==l.PAGELOAD&&k.hide(),b==l.CACHE&&t.postprocess(a),r.invoke("m:ajax:complete")}}var A=null;document.addEventListener("click",function(event){var a=event.target;(a.tagName==="INPUT"||a.tagName==="BUTTON")&&a.type=="submit"&&(A=a)},!0);function B(event,a,b,c,d){return w(event,a,b,c,d?[t].concat(d):[t])}function a(event,a,b,c){return!a||(event.which||event.button)>=2?!0:B(event,event.target,new p(a),b,c)}function b(event,a,b,c,d,e,f,g){__p&&__p();return j.guard(function(){__p&&__p();if(!a||!a.action)return!0;var h=i.convertFormToDictionary(a);A&&(h[A.name]=A.value,A=null);var j=new p(a.action);j.addData(h);j.setMethod(a.method||"POST");var n=null;if(c===l.PAGELOAD){if(a.method.toUpperCase()==="GET"){h=new s(a.action).addQueryData(h);m.pushState(h)}k.show()}else n=e?null:d||a;f||(f=[]);f.push(new z(a,c,e));g&&j.setTimeout(g);r.invoke("MAjaxify.form.ajax.start","",j);return w(event,n,j,b,f)},"MAjaxify.form")()}f.ajaxify=B;f.form=b;f.link=a}),null);
__d("legacy:m-ajaxify-js",["MAjaxify"],(function(a,b,c,d,e,f,g){a.MAjaxify=g}),3);