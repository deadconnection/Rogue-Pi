if (self.CavalryLogger) { CavalryLogger.start_js(["6eRL7"]); }

__d("MLogoutClearCache",["MCache","Stratcom"],(function(a,b,c,d,e,f,g,h){h.listen("click","logout",g.clear)}),null);
__d("KaiOSSendMessageUtil",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={Type:Object.freeze({HANDLE_BACK:"handle_back",MESSAGE_RECEIVED:"received",OPEN_URL:"open_url",REGISTER_PUSH:"register_push",SCREEN_ORIENTATION_LOCK:"screen_orientation_lock",UNREGISTER_PUSH:"unregister_push",CHECK_FOR_PUSH_UPDATE:"check_for_push_update",PUSH_UPDATE_COMPLETED:"push_update_completed",SET_VOLUME:"set_volume",FBT_STRINGS:"fbt_strings",CONFIG_RESPONSE:"config_response",FETCH_MSISDN:"fetch_msisdn",GET_CONTACTS:"get_contacts"}),Action:"action",ActionPayload:"payload",CallbackID:"callback_id",postMessage:function(a,b,c,d){if(a&&b){var e=new Map();e.set(g.Action,b);c&&e.set(g.ActionPayload,c);d&&e.set(g.CallbackID,d);a.postMessage(e,"*")}}};e.exports=g}),null);
__d("KaiOSFullscreenVideoHandler",["getActiveElement","KaiOSSendMessageUtil"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=Object.freeze({RIGHT:6,LEFT:4,UP:2,DOWN:8,MIDDLE:5}),j=Object.freeze({KEY:"type",DOWN:-1,UP:1});function a(a){this.hostWindow=a}a.prototype.handleKeyDownEvent=function(event){__p&&__p();var a=this.getVideoIfFullScreen();if(!a)return!1;if(event.key==="SoftLeft"){document.exitFullscreen();return!0}else if(event.key==="SoftRight"){a.muted=!a.muted;return!0}return!1};a.prototype.handleClickEvent=function(event){var a=this.getVideoIfFullScreen();if(!a)return!1;this.togglePause(a);return!0};a.prototype.handleMouseMoveEvent=function(event){return!1};a.prototype.getVideoIfFullScreen=function(){return document.fullscreenElement&&document.fullscreenElement.nodeName&&document.fullscreenElement.nodeName=="VIDEO"?g():null};a.prototype.seek=function(a,b){b?a.currentTime=Math.min(a.duration,a.currentTime+10):a.currentTime=Math.max(0,a.currentTime-10)};a.prototype.togglePause=function(a){a.paused?a.play():a.pause()};a.prototype.volume=function(a){if(!a||a!=j.UP&&a!=j.DOWN)return;var b=new Map();b.set(j.KEY,a.toString());h.postMessage(this.hostWindow,h.Type.SET_VOLUME,b)};a.prototype.control=function(a,b){__p&&__p();if(b)switch(b){case i.UP:this.volume(j.UP);break;case i.DOWN:this.volume(j.DOWN);break;case i.LEFT:this.seek(a,!1);break;case i.RIGHT:this.seek(a,!0);break;case i.MIDDLE:this.togglePause(a);break}};e.exports=a}),null);
__d("MRegMultiStepConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BACK_BUTTON:"reg_back_button",FORM:"multi_step_form",LEGAL_TEXT:"legal_text",LEGAL_TEXT_KOREA:"legal_text_korea",SUBMIT:"multi_step_submit",NEXT:"multi_step_next",BUTTON_BLOCK:"multi_step_next_button_block",HIDDEN:"hidden_elem",WRAPPER:"multi_step_input_wrapper",DISPLAYED_STEP:"multi_step_displayed_step",FOCUS_ME:"focus_me",PROGRESS_BAR_STEP:"progress_bar_step",WELCOME:"multi_step_welcome",LANGUAGE_SELECTOR:"multi_step_language_selector",PASSWORD:"multi_step_password",PASSWORD_STEP_TITLE:"password_step_title",PASSWORD_STEP_BODY:"password_step_body",PASSWORD_STEP_INPUT:"password_step_input",PASSWORD_CHANGE_BUTTON:"password_change_button",PASSWORD_ACCEPT_BUTTON:"password_accept_button",SUGGEST_NEW_PASSWORD_BUTTON:"suggest_new_password_button",PASSWORD_SUGGESTION:"multi_step_password_suggestion",PASSWORD_SUGGESTION_INPUT:"password_suggestion_input",SAVE_PASSWORD:"multi_step_save_password",SKIP_PASSWORD:"multi_step_skip_password",SKIP_PASSWORD_INPUT:"multi_step_skip_password_input",SKIP_PW_GO_BACK:"multi_step_skip_pw_go_back",SKIP_PW_SIGN_UP:"multi_step_skip_pw_sign_up",DID_USE_SUGGESTED_NAME_INPUT:"did_use_suggested_name_input",WAS_SHOWN_NAME_SUGGESTIONS_INPUT:"was_shown_name_suggestions_input",REG_IMPRESSION_ID:"reg_impression_id",STEP_TITLE_TEXT:"step_title_text",NAME_STEP_BODY:"name_step_body",NAME_SUGGESTION_PICKER:"name_suggestion_picker",NAME_SUGGESTION_PICKER_RADIOS:"name_suggestion_picker_options",NAME_SUGGESTION_OPTION:"name_suggestion_option",NONE_OF_THESE_NAMES_OPTION:"none_of_these_names_option",CP_TITLE:"contactpoint_step_title",CP_STEP_BODY:"contactpoint_step_body",CP_INPUT:"contactpoint_step_input",CP_INPUT_LABEL:"contactpoint_step_input_label",CP_TYPE_TOGGLE_UNIT:"contactpoint_type_toggle_unit",SWITCH_PHONE_TO_EMAIL:"switch_phone_to_email",SWITCH_EMAIL_TO_PHONE:"switch_email_to_phone",CHANGE_LANGUAGE:"change_language",DEFAULT_LANGUAGE:"default_language",DISMISS_NO_INTERNET_DIALOG:"dismiss_no_internet_dialog",NUM_SUBMITS:"num_submits",LOGIN_LINK:"login_link",FOOTER_LANGUAGE_SELECTOR:"language_selector",ZERO_HEADER_AF_CLIENT:"zero_header_af_client",BIRTHDAY_STEP_BODY:"birthday_step_body",GENDER_STEP_BODY:"gender_step_body"})}),null);
__d("XKaiOSAppJioTagController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("https://m.facebook.com/kaiosapp/jio/tag/",{})}),null);
__d("XKaiOSUpdatePushController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("https://m.facebook.com/kaiosapp/push/update/",{})}),null);
__d("KaiOSController",["Promise","KaiOSFullscreenVideoHandler","KaiOSLogger","KaiOSSendMessageUtil","MRequest","MViewport","Random","Stratcom","URI","URLSearchParams","XKaiOSUpdatePushController","getActiveElement","isLinkshimURI","promiseDone","MRegMultiStepConstants","XKaiOSAppJioTagController"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){"use strict";__p&&__p();var w="app://m.facebook.com",x=Object.freeze({APP_INFO:"app_info",UPDATE_PUSH:"update_push",CONFIG_REQUEST:"config_request"}),y=new Map(),z=null,A=null,B=new g(function(a,b){A=a}),C=0,D=!1,E=null,F=!1,G=!1,H=!1,I=void 0,J=!1;function K(a){__p&&__p();if(!(a instanceof Map))return;var b=a.get(j.Action),c=a.get(j.ActionPayload);a=a.get(j.CallbackID);if(a){var d=y.get(a);d&&(y["delete"](a),d(c));return}switch(b){case x.APP_INFO:c&&c.get&&(R.appVersion=c.get("app_version"),D&&(i.logAppVersion(R.appVersion),D=!1),R.setup());break;case x.UPDATE_PUSH:if(c&&c.get){a=c.get("subscription");R.updatePush(a.endpoint,JSON.stringify(a.keys))}break;case x.CONFIG_REQUEST:d=new Map();d.set("show_news_feed_on_notification_back",H);j.postMessage(z,j.Type.CONFIG_RESPONSE,d);break}}function L(a){__p&&__p();if(I&&I.handleClickEvent(a)){a.preventDefault();a.stopPropagation();return}var b=a.target,c=null;b&&b.tagName==="A"?c=b.href:b&&b.parentElement&&b.parentElement.tagName==="A"?c=b.parentElement.href:b&&b.parentElement&&b.parentElement.parentElement&&b.parentElement.parentElement.tagName==="A"&&(c=b.parentElement.parentElement.href);b=new o(c);var d=c!=null&&c!==""&&!/\.facebook.com$/i.test(b.getDomain());c!=null&&(s(b)||d)&&(R.openUrl(c),a.preventDefault(),a.stopPropagation())}function M(a){__p&&__p();if(!G||a!="Backspace"&&a!="BrowserBack")return!1;a=location.pathname.split("https://m.facebook.com/");a=a.length>=2&&a[1]==="reg";if(!a)return!1;a=document.getElementById(u.BACK_BUTTON);if(a&&a.offsetHeight>0){a.click();return!0}return!1}function N(){var a=location.pathname;a=a==="/"||a==="/kaiosapp/jio/home/"||a.startsWith("https://m.facebook.com/home.php")||a.startsWith("https://m.facebook.com/index.php")||a.startsWith("https://m.facebook.com/confirmemail.php");var b=new p(window.location.search);b=b.has("soft");return a&&!b}function O(event){I&&I.handleMouseMoveEvent(event)&&(event.preventDefault(),event.stopPropagation())}function P(event){if(I&&I.handleKeyDownEvent(event)){event.preventDefault();event.stopPropagation();return}switch(event.key){case"Backspace":case"BrowserBack":document.fullscreenElement?(document.exitFullscreen(),event.preventDefault(),event.stopPropagation()):M(event.key)?(event.preventDefault(),event.stopPropagation()):N()&&l.getScrollTop()>5?(l.scrollTo(0,0),event.preventDefault(),event.stopPropagation()):N()||(j.postMessage(z,j.Type.HANDLE_BACK),event.preventDefault(),event.stopPropagation());break;case"Enter":R.appVersion!=null&&event.target.type=="textarea"&&(event.target.blur(),event.preventDefault(),event.stopPropagation())}}function Q(event){if(document.fullscreenElement)document.fullscreenElement.nodeName=="VIDEO"&&(screen.orientation&&screen.orientation.lock("landscape"),document.fullscreenElement.mozRequestPointerLock());else{var a=new Map();a.set("orientation","natural");j.postMessage(z,j.Type.SCREEN_ORIENTATION_LOCK,a)}}var R={appVersion:null,init:function(a){C=a.get("app_id"),D=!!a.get("should_log_app_version"),E=a.get("fbt_strings"),F=!!a.get("open_links_in_app"),G=!!a.get("back_button_on_reg_page"),H=!!a.get("show_news_feed_on_notification_back"),window.addEventListener("message",R.receiveMessage,!1)},setup:function(){__p&&__p();F&&window.addEventListener("click",L,!0);window.addEventListener("keydown",P,!1);window.addEventListener("mousemove",O,!0);R.appVersion!=null&&window.addEventListener("fullscreenchange",Q,!1);n.listen("click",["m-composer","composer-submit"],function(a){setTimeout(function(){var b=r();b&&b==a.getNode("composer-submit")&&b.blur()},100)});j.postMessage(z,j.Type.CHECK_FOR_PUSH_UPDATE);if(E!==null&&E!==undefined){var a=new Map();a.set("fbt_strings",E);j.postMessage(z,j.Type.FBT_STRINGS,a)}},sendMessageToAppWithCallback:function(a,b){var c=m.random().toString();y.set(c,b);j.postMessage(z,a,null,c)},maybeTagMeAsKaiOSApp:function(){z!=null?R.tagMeAsKaiOSApp():J=!0},tagMeAsKaiOSApp:function(){var a=v.getURIBuilder().getURI();a=new k(a).setMethod("post").setData({is_kaios_app:!0});J=!1;a.send()},waitForKaiOS:function(){return B},registerPush:function(a){var b=Math.random().toString();y.set(b,a);j.postMessage(z,j.Type.REGISTER_PUSH,null,b)},unregisterPush:function(){t(R.waitForKaiOS(),function(){j.postMessage(z,j.Type.UNREGISTER_PUSH)})},updatePush:function(a,b){var c=q.getURIBuilder().getURI();c=new k(c).setMethod("post").setData({push_endpoint:a,app_id:C,subscription_keys:b});c.listen("done",function(a){a.payload&&a.payload.success&&j.postMessage(z,j.Type.PUSH_UPDATE_COMPLETED)});c.send()},openUrl:function(a){var b=new Map();b.set("url",a);j.postMessage(z,j.Type.OPEN_URL,b)},receiveMessage:function(event){if(!event||w!=event.origin||!event.source)return;A&&(A(),A=null);z||(z=event.source,I=new h(z),j.postMessage(z,j.Type.MESSAGE_RECEIVED));event.data&&K(event.data);J&&R.tagMeAsKaiOSApp()},_setHostWindowUnitTestsOnly:function(a){z=a},isTagIfInsideApp:function(){return J},fetchMsisdn:function(a){var b=m.random().toString();y.set(b,a);j.postMessage(z,j.Type.FETCH_MSISDN,null,b)}};e.exports=R}),null);
__d("BrowserPrefillSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BROWSER_DROPDOWN:"browser_dropdown",BROWSER_ONLOAD:"browser_onload",SERVER_PREFILL:"server_prefill",ATTEMPT_USER:"attempt_user",EMAIL_NOTIFICATION:"email_notification",HEADER:"header",IDENTIFIED_USER:"identified_user",LAST_LOGIN:"last_login",MOBILE_SUBNO_KEY:"mobile_subno_key",PROVIDED_OR_SOFT_MATCHED:"provided_or_soft_matched",TYPO_CORRECTED:"typo_corrected"})}),null);
__d("BrowserPrefillType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CONTACT_POINT:"contact_point",PASSWORD:"password"})}),null);
__d("DamerauLevenshtein",[],(function(a,b,c,d,e,f){__p&&__p();a={DamerauLevenshteinDistance:function(a,b){__p&&__p();if(a.length===0)return b.length;if(b.length===0)return a.length;if(a===b)return 0;var c,d,e=[];e[0]=[];e[1]=[];e[2]=[];for(d=0;d<=b.length;d++)e[0][d]=d;for(c=1;c<=a.length;c++)for(d=1;d<=b.length;d++){e[c%3][0]=c;var f=a.charAt(c-1)===b.charAt(d-1)?0:1;e[c%3][d]=Math.min(e[(c-1)%3][d]+1,e[c%3][d-1]+1,e[(c-1)%3][d-1]+f);c>1&&d>1&&a.charAt(c-1)==b.charAt(d-2)&&a.charAt(c-2)==b.charAt(d-1)&&(e[c%3][d]=Math.min(e[c%3][d],e[(c-2)%3][d-2]+f))}return e[a.length%3][b.length]}};e.exports=a}),null);
__d("LoginEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LOGIN_FAILURE:"login_failure",LOGIN_SUCCESS:"login_success",SESSION_TERMINATION:"session_termination",SESSION_UPDATE:"session_update",SESSION_VALIDATION:"session_validation",CHANGED_USER_IDENTIFIER:"changed_user_identifier",CLICKED_NEXT:"clicked_next",CLICKED_NEXT_USER_IDENTIFIER_BLANK:"clicked_next_user_identifier_blank",CLICKED_NEXT_USER_IDENTIFIER_FILLED:"clicked_next_user_identifier_filled",PASSWORD_ENTRY_VIEWED:"password_entry_viewed",CHANGED_PASSWORD:"changed_password",CLICKED_BACK:"clicked_back",CLICKED_SUBMIT:"clicked_submit",CLICKED_SUBMIT_PASSWORD_BLANK:"clicked_submit_password_blank",CLICKED_SUBMIT_PASSWORD_FILLED:"clicked_submit_password_filled",FORM_LOAD_CLIENT:"form_load_client",FORM_LOAD:"form_load",FORM_FOCUS:"form_focus",CLICKED_REG_IDENTIFIER_BLANK:"clicked_reg_identifier_blank",CLICKED_REG_IDENTIFIER_FILLED:"clicked_reg_identifier_filled",BROWSER_AUTOCOMPLETE:"browser_autocomplete",INVALID_CONTACTPOINT:"invalid_contactpoint",VALID_CONTACTPOINT:"valid_contactpoint",SHOWN_OTP_LINK:"shown_otp_link",CLICKED_OTP_LINK:"clicked_otp_link",CLICKED_NOT_YOU:"clicked_not_you",LOGIN_WITH_REMOVED_CP_CORRECT_PW:"login_with_removed_cp_correct_pw"})}),null);
__d("LoginFormKeys",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BUTTON_KEY:"loginbutton",CUID:"cuid",EMAIL_FIELD_CONTAINER:"email_container",EMAIL_FIELD_KEY:"email",ERROR_BOX_KEY:"error_box",HEADER_BLOCK:"header_block",LOGIN_LINK:"login_link",NOT_ME_LINK:"not_me_link",PASSWORD_FIELD_KEY:"pass",PREFILL_CONTACT_POINT:"prefill_contact_point",PREFILL_SOURCE:"prefill_source",PREFILL_TYPE:"prefill_type",EMAIL_INPUT_CONTAINER:"email_input_container",FIRST_PREFILL_SOURCE:"first_prefill_source",FIRST_PREFILL_TYPE:"first_prefill_type",HAD_CP_PREFILLED:"had_cp_prefilled",HAD_PASSWORD_PREFILLED:"had_password_prefilled",AUTH_STEP_CP_DISPLAY:"step_two_cp_display",EMAIL_COMPONENTS_WRAPPER:"email_components_wrapper",PASSWORD_COMPONENTS_WRAPPER:"password_component_wrapper"})}),null);
__d("BrowserPrefillLogging",["BanzaiLogger","BrowserPrefillSource","BrowserPrefillType","DamerauLevenshtein","LoginEvent","LoginFormKeys","ge"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";__p&&__p();a={initContactpointFieldLogging:function(a){this.contactpointFieldID=a.contactpointFieldID;this._updateContactpoint();this.serverPrefillContactpoint=a.serverPrefill;a=m(this.contactpointFieldID);if(a==null)return;a.addEventListener("input",this._mayLogContactpointPrefillViaDropdown.bind(this));window.addEventListener("load",this._mayLogContactpointPrefillOnload.bind(this));return},registerCallback:function(a){this.regeisteredCallbacks=this.regeisteredCallbacks||[],this.regeisteredCallbacks.push(a)},_invokeCallbacks:function(a,b){if(this.regeisteredCallbacks==null||this.regeisteredCallbacks.size===0)return;this.regeisteredCallbacks.forEach(function(c){c(a,b)})},initPasswordFieldLogging:function(a){this.passwordFieldID=a.passwordFieldID;this._updatePassword();a=m(this.passwordFieldID);if(a==null)return;a.addEventListener("input",this._mayLogPasswordPrefillViaDropdown.bind(this));window.addEventListener("load",this._mayLogPasswordPrefillOnload.bind(this))},updatePrefill:function(a,b,c){var d=m(l.PREFILL_SOURCE),e=m(l.PREFILL_TYPE),f=m(l.FIRST_PREFILL_SOURCE),g=m(l.FIRST_PREFILL_TYPE),h=m(l.HAD_CP_PREFILLED),j=m(l.HAD_PASSWORD_PREFILLED),k=m(l.PREFILL_CONTACT_POINT);d!=null&&(d.value=b);e!=null&&(e.value=c);k!=null&&a!=null&&(k.value=a);g!=null&&(g.value==null||g.value=="")&&(g.value=c);f!=null&&(f.value==null||f.value=="")&&(f.value=b);h!=null&&(h.value==null||h.value==="false")&&c===i.CONTACT_POINT&&(h.value="true");j!=null&&(j.value==null||j.value==="false")&&c===i.PASSWORD&&(j.value="true")},_mayLogContactpointPrefillOnload:function(){this._updateContactpoint();if(this.previousContactpoint==null||this.previousContactpoint==="")return;var a=this.previousContactpoint===this.serverPrefillContactpoint?h.SERVER_PREFILL:h.BROWSER_ONLOAD;this._logBrowserPrefill(a,i.CONTACT_POINT);this._invokeCallbacks(a,i.CONTACT_POINT)},_mayLogPasswordPrefillOnload:function(){this._updatePassword();if(this.previousPassword==null||this.previousPassword==="")return;this._logBrowserPrefill(h.BROWSER_ONLOAD,i.PASSWORD);this._invokeCallbacks(h.BROWSER_ONLOAD,i.PASSWORD)},_mayLogContactpointPrefillViaDropdown:function(){__p&&__p();var a=m(this.contactpointFieldID);if(a==null||a.value==null)return;if(this._isBrowserPrefill(this.previousContactpoint,a.value)===!1){this._updateContactpoint();return}this._updateContactpoint();this._logBrowserPrefill(h.BROWSER_DROPDOWN,i.CONTACT_POINT);this._invokeCallbacks(h.BROWSER_DROPDOWN,i.CONTACT_POINT)},_mayLogPasswordPrefillViaDropdown:function(){__p&&__p();var a=m(this.passwordFieldID);if(a==null||a.value==null)return;if(this._isBrowserPrefill(this.previousPassword,a.value)===!1){this._updatePassword();return}this._updatePassword();this._logBrowserPrefill(h.BROWSER_DROPDOWN,i.PASSWORD);this._invokeCallbacks(h.BROWSER_DROPDOWN,i.PASSWORD)},_isBrowserPrefill:function(a,b){if(b==="")return!1;if(b===a)return!1;if(b.length===1||a.length===b.length+1||b.length===a.length+1)return!1;var c=j.DamerauLevenshteinDistance(b,a);return c===a.length-b.length?!1:!0},_updateContactpoint:function(){var a=m(this.contactpointFieldID);this.previousContactpoint=a!=null&&a.value!=null?a.value:""},_updatePassword:function(){var a=m(this.passwordFieldID);this.previousPassword=a!=null&&a.value!=null?a.value:""},_logBrowserPrefill:function(a,b){var c=null;b===i.CONTACT_POINT&&(c=this.previousContactpoint);a!==h.SERVER_PREFILL&&this.updatePrefill(c,a,b);g.create({signal:!0}).log("LoginEventsLoggerConfig",{event:k.BROWSER_AUTOCOMPLETE,prefill_contact_point:c,prefill_source:a,prefill_type:b})}};e.exports=a}),null);
__d("MButton",["CSSCore","DOM","cx","invariant"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k="_2347";function l(a){h.isType(a,"button")||h.isType(a,"a")||j(0)}var m={isEnabled:function(a){l(a);return a.disabled===!1||h.isType(a,"a")&&!g.hasClass(a,k)},setEnabled:function(a,b){l(a);if(m.isEnabled(a)===b)return;h.isType(a,"button")?a.disabled=!b:(g.conditionClass(a,k,!b),b?(a.removeAttribute("tabindex"),a.removeAttribute("aria-disabled")):(a.setAttribute("tabindex","-1"),a.setAttribute("aria-disabled","true")))}};e.exports=m}),null);
__d("MLoginFormError",["CSS","DOM","Stratcom","cx","invariant"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l="_3qsy",m="_3qs-";a={set:function(a,b){b!==null||k(0),g.addClass(a,l),g.addClass(a,m),h.listen(a,"input",null,function(b){g.removeClass(a,m)})},unset:function(a){g.removeClass(a,l),g.removeClass(a,m)}};e.exports=a}),null);
__d("MLoginFormSigils",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FORM:"m_login_form",BUTTON:"m_login_button",BUTTON_ALT:"m_login_button_alt",NOTICE:"m_login_notice",UPSELL:"m_login_upsell",EMAIL_INPUT:"m_login_email",PASSWORD_INPUT:"m_login_password",TRY_NUMBER:"m_login_try_number",UNRECOGNIZED_TRIES_COUNT:"m_login_unrecognized_tries",MORE_LINKS:"m_login_more_links",NEXT_BUTTON:"m_login_next_btn",CP_TEXT:"m_login_cp_text",LANGUAGE_SELECTOR:"language_selector",LOGIN_IDENTIFY_STEP_ELEMENT:"login_identify_step_element",LOGIN_IDENTIFY_STEP_PROGRESS_BAR:"login_identify_step_progress_bar",LOGIN_PASSWORD_STEP_ELEMENT:"login_password_step_element",CHANGE_CP_LINK:"m_login_change_cp_link",REG_BUTTON:"m_reg_button",CONTACTPOINT_EXISTS:"contactpoint_exists",RECOGNIZED_USER_NAME_HOLDER:"m_recognized_user_name",PROFILE_PIC_ELEM:"profile_pic_elem",CONTACTPOINT_DISPLAY_LABEL:"contactpoint_display_label",CHANGE_NOTICE_BACKGROUND:"change_notice_background",ONE_TIME_PASSWORD_LINK:"one_time_password_link",PASSWORD_FIELD_LABEL:"password_field_label",OTP_RETRIEVE_DESC:"otp_retrieve_desc"})}),null);
__d("MPasswordPlainTextToggleSigils",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({INPUT:"password-plain-text-toggle-input",TOGGLE:"password-plain-text-toggle"})}),null);
__d("XLoginCheckContactpointController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("https://m.facebook.com/login/v/",{contactpoint:{type:"String",required:!0}})}),null);
__d("XLoginProfileInfoFetcherController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("https://m.facebook.com/login/pp/",{contactpoint:{type:"String"}})}),null);
__d("MLoginController",["BanzaiLogger","BrowserPrefillSource","BrowserPrefillType","BrowserPrefillLogging","CSS","cx","DataStore","DOM","DeferredCookie","fbt","ge","goURI","LoginFormKeys","MAjaxify","MAnimator","MButton","MHistory","MLoginFormError","MLoginFormSigils","MMsisdnJioApiModule","MPasswordPlainTextToggleSigils","MRequest","MViewport","Keys","Stratcom","SubscriptionsHandler","XLoginCheckContactpointController","XLoginProfileInfoFetcherController","URI"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I){"use strict";__p&&__p();var J="_pg8",K="stepOneIdentification",L="stepTwoAuthenticaiton",M="auth",N=500,O=5;a={_initTwoStepsListeners:function(){__p&&__p();var a=new F();a.addSubscriptions(E.listen("click",y.CHANGE_CP_LINK,function(event){event.prevent(),this._logAction("clicked_not_you"),this._showEditableCPFieldOnAuthStep()}.bind(this)),E.listen("m:history:change",null,function(event){var a=event.getData();if(a.path){a=new I(a.path);this._initialURI.getPath()===a.getPath()&&(event.prevent(),event.getData().soft===M?this._onEnteringCP():this._onBackToCP())}}.bind(this)),E.listen("click",y.NEXT_BUTTON,this._handleNextButtonClick.bind(this)));this.shouldEnableOTPWithoutRedirection&&(n.listen(this.oneTimePasswordLink,"click",null,this._onSendOneTimePassword.bind(this)),this.otpPasswordPlaceholder=p._("Password or one-off password"));E.listen("m:page:unload",null,function(){E.removeCurrentListener(),a.release()})},initRegButton:function(a){var b=a.root;this.regURI=a.regURI;this.regButton=n.find(b,"a",y.REG_BUTTON);this.regButton.removeAttribute("href");n.listen(this.regButton,"click",null,this._sendLoginRequestFromReg.bind(this))},initLoginForm:function(a){__p&&__p();this.root=a.root;this.isTwoStepsLogin=a.isTwoStepsLogin;this.isActionLoggingEnabled=a.isActionLoggingEnabled;this.shouldPrefillHeaderJio=a.shouldPrefillHeaderJio;this.loginForm=n.find(this.root,"form",y.FORM);this.loginForm.action=a.ajaxURI;this.loginButton=n.find(this.root,"button",y.BUTTON);var b=n.scry(this.root,"a",y.BUTTON_ALT);b=b.pop();this.loginButtonAlt=null;b!==undefined&&(this.loginButtonAlt=b);this.isTwoStepsLogin?(this.hadCPPrefilled=!1,this.shouldClearPasswordIfOnlyPasswordPrefilled=!0,this._initialURI=I.getRequestURI(),this.onErrorRegURI=a.onErrorRegURI,this.shouldAutoLandOnStep2=a.shouldAutoLandOnStep2,this.prefillContactpointHiddenInput=q(s.PREFILL_CONTACT_POINT),this.emailComponentsWrapper=q(s.EMAIL_COMPONENTS_WRAPPER),this.passwordComponentWrapper=q(s.PASSWORD_COMPONENTS_WRAPPER),this.stepTwoCPDisplayContainer=q(s.AUTH_STEP_CP_DISPLAY),this.shouldEnableOneTimePassword=a.shouldEnableOneTimePassword,this.shouldEnableOTPWithoutRedirection=a.shouldEnableOTPWithoutRedirection,this.shouldEnableInlineError=a.shouldEnableInlineError,this.nextButton=n.find(this.root,"button",y.NEXT_BUTTON),this.cpText=n.scry(this.root,"span",y.CP_TEXT).pop(),this.cpDisplayLabel=n.scry(this.root,"span",y.CONTACTPOINT_DISPLAY_LABEL).pop(),this.passwordFieldLabel=n.scry(this.root,"span",y.PASSWORD_FIELD_LABEL).pop(),this.profilePicElem=n.scry(this.root,"*",y.PROFILE_PIC_ELEM).pop(),this.oneTimePasswordLink=n.scry(this.root,"a",y.ONE_TIME_PASSWORD_LINK).pop(),this.otpSentMsg=n.scry(this.root,"div",y.OTP_RETRIEVE_DESC).pop(),this.userName=n.scry(this.root,"span",y.RECOGNIZED_USER_NAME_HOLDER).pop(),this.moreLinks=n.scry(this.root,"div",y.MORE_LINKS).pop(),this.progressBar=n.find(this.root.ownerDocument,"div",y.LOGIN_IDENTIFY_STEP_PROGRESS_BAR),this.languageSelector=n.find(this.root.ownerDocument,"div",y.LANGUAGE_SELECTOR),this.identifyStepElements=n.scry(this.root.ownerDocument,"div",y.LOGIN_IDENTIFY_STEP_ELEMENT),this.identifyStepElements.push(this.languageSelector),this.passwordStepElements=n.scry(this.root.ownerDocument,"div",y.LOGIN_PASSWORD_STEP_ELEMENT),this._initTwoStepsListeners(),m.set(this.loginForm,"step",K)):this.prefillContactpointHiddenInput=q(y.EMAIL_INPUT);this.loginButton.type="button";this.notice=n.find(this.root,"div",y.NOTICE);this.emailInput=this._getElem("input",y.EMAIL_INPUT);this.passwordInput=this._getElem("div",y.PASSWORD_INPUT);this.emailInputContainer=q(s.EMAIL_INPUT_CONTAINER);this.passwordInputDOM=n.find(this.passwordInput,"input");this.tryNumber=this._getElem("input",y.TRY_NUMBER);this.unrecognizedTriesCountInput=this._getElem("input",y.UNRECOGNIZED_TRIES_COUNT);this.upsell=this._getElem("div",y.UPSELL);this.numPasswordErrorAttempts=0;this.unrecognizedContactpointErrorCount=0;this.rapidFeedbackUri=a.rapidFeedbackUri;this.originalPasswordPlaceholder=this.passwordInputDOM.getAttribute("placeholder");this.shouldPrefillHeaderJio&&!this.prefillContactpointHiddenInput.value&&z.prefillMsisdnForLogin(this.emailInput);n.listen(this.loginButton,"click",null,this._handleSubmitButtonClick.bind(this));this.loginButtonAlt!==null&&n.listen(this.loginButtonAlt,"click",null,this._handleSubmitButtonClick.bind(this));b=a.listenKeyDown?"keydown":"keyup";this.isTwoStepsLogin?(this.nextButton.setAttribute("type","button"),this.passwordInputDOM.setAttribute("tabindex",-1),n.listen(this.loginForm,"keydown",null,function(a){a.getRawEvent().keyCode===D.RETURN?m.get(this.loginForm,"step","")===K?this._handleNextButtonClick():this._handleSubmitButtonClick():a.getRawEvent().keyCode===D.TAB&&m.get(this.loginForm,"step","")===K&&this._handleNextButtonClick()}.bind(this))):n.listen(this.loginForm,b,null,function(a){a.getRawEvent().keyCode===D.RETURN&&this._handleSubmitButtonClick()}.bind(this));a.clearOnDelete&&n.listen(this.emailInput,b,null,function(a){a.getRawEvent().keyCode===D.BACKSPACE&&(this.emailInput.value="")}.bind(this));if(this.isActionLoggingEnabled){E.listen("change",y.EMAIL_INPUT,function(a){this._logAction("changed_user_identifier"),this.shouldDisplayOTPMsg=!1,this._rerenderAuthStepCPDisplay()}.bind(this));E.listen("change",y.PASSWORD_INPUT,function(a){this._logAction("changed_password")}.bind(this));E.listen("click",y.REG_BUTTON,function(a){this.emailInput.value===""?this._logAction("clicked_reg_identifier_blank"):this._logAction("clicked_reg_identifier_filled")}.bind(this));this.hasFocusedAlready=!1;window.addEventListener("load",function(a){this._logAction("form_load_client")}.bind(this),!1);a=n.scry(this.root,"input",null);a.forEach(function(a){n.listen(a,"focus",null,this._logFormFocus.bind(this))}.bind(this))}this.shouldAutoLandOnStep2&&this.emailInput.value.trim()!==""&&(this.hadCPPrefilled=!0,w.pushSoftState(M))},_logFormFocus:function(){if(this.hasFocusedAlready)return;this.hasFocusedAlready=!0;this._logAction("form_focus")},_getElem:function(a,b){a=n.scry(this.root,a,b);return a.length===0?null:a[0]},_maybeScrollToError:function(){this.shouldEnableInlineError&&this._animateScrollToElem(this.passwordFieldLabel)},_animateScrollToElem:function(a){if(!a)return;var b=C.getScrollPos().y,c=a.offsetTop;a=function(a){C.scrollTo(0,b+a*(c-b-O))};new u().start(a,null,function(){},N)},_autoFocusIfNeeded:function(a){if(!this.emailInput||!this.passwordInput)return;if(!this.passwordInputDOM)return;var b=this.emailInput.value===""||a[y.EMAIL_INPUT].error;a=this.passwordInputDOM.value===""||a[y.PASSWORD_INPUT].error;(b||a)&&(b?this.emailInput.focus():a&&(this.passwordInputDOM.focus(),this._maybeScrollToError()))},_sendLoginRequest:function(){o.flushAllCookies(),k.hide(this.notice),v.setEnabled(this.loginButton,!1),this.isTwoStepsLogin&&v.setEnabled(this.nextButton,!1),setTimeout(v.setEnabled.bind(null,this.loginButton,!0),15e3),this.loginButtonAlt!==null&&(v.setEnabled(this.loginButtonAlt,!1),setTimeout(v.setEnabled.bind(null,this.loginButtonAlt,!0),15e3)),this.tryNumber!==null&&this.tryNumber.setAttribute("value",this.numPasswordErrorAttempts),this.unrecognizedTriesCountInput!==null&&(this.unrecognizedTriesCountInput.value=this.unrecognizedContactpointErrorCount),t.form(null,this.loginForm,null,"nocache",null,!0,[{response:this._onLoginResponse.bind(this)}])},_sendLoginRequestFromReg:function(){__p&&__p();o.flushAllCookies();if(this.emailInput.value===""||this.passwordInput.value===""){r(this.regURI);return}k.hide(this.notice);v.setEnabled(this.loginButton,!1);setTimeout(v.setEnabled.bind(null,this.loginButton,!0),15e3);this.loginButtonAlt!==null&&(v.setEnabled(this.loginButtonAlt,!1),setTimeout(v.setEnabled.bind(null,this.loginButtonAlt,!0),15e3));t.form(null,this.loginForm,null,"nocache",null,!0,[{response:this._onLoginFromRegResponse.bind(this)}])},_logActionIfEnabled:function(a){this.isActionLoggingEnabled&&this._logAction(a)},_logAction:function(a){__p&&__p();var b=q(s.FIRST_PREFILL_TYPE),c=null;b!=null&&b.value!==""&&(c=b.value);b=q(s.FIRST_PREFILL_SOURCE);var d=null;b!=null&&b.value!==""&&(d=b.value);b=q(s.PREFILL_TYPE);var e=null;b!=null&&b.value!==""&&(e=b.value);b=q(s.PREFILL_SOURCE);var f=null;b!=null&&b.value!==""&&(f=b.value);b=q(s.HAD_CP_PREFILLED);var h=null;b!=null&&b.value!==""&&(h=b.value);b=q(s.HAD_PASSWORD_PREFILLED);var i=null;b!=null&&b.value!==""&&(i=b.value);g.create({signal:!0}).log("LoginEventsLoggerConfig",{event:a,first_prefill_type:c,first_prefill_source:d,prefill_type:e,prefill_source:f,had_cp_prefilled:h,had_password_prefilled:i})},_handleSubmitButtonClick:function(){this._logActionIfEnabled("clicked_submit"),this.passwordInputDOM.value===""?this._logActionIfEnabled("clicked_submit_password_blank"):this._logActionIfEnabled("clicked_submit_password_filled"),this._sendLoginRequest()},_onSendOneTimePassword:function(event){event.prevent(),t.ajaxify(null,null,new B(this.otp_uri).setMethod("POST"),null,[{response:function(a){a=a.payload;if(a.msg===null)return;n.setContent(this.otpSentMsg,a.msg);this.shouldDisplayOTPMsg=!0;this._rerenderAuthStepCPDisplay()}.bind(this)}])},_populateProfileInfo:function(a){__p&&__p();var b=H.getURIBuilder().setString("contactpoint",this.emailInput.value).getURI();t.ajaxify(null,null,new B(b).setMethod("GET"),null,[{response:function(b){__p&&__p();this.nextButton.disabled=!1;if(!b.payload){a();return}b=b.payload;if(b.profile_pic_elem){var c=this.profilePicElem.parentNode;n.replace(this.profilePicElem,b.profile_pic_elem);this.profilePicElem=n.scry(c,"*",y.PROFILE_PIC_ELEM).pop();this.displayProfilePic=!0}b.user_name&&this.userName&&(n.setContent(this.userName,b.user_name||this.emailInput.value),this.displayUserName=!0);b.otp_uri&&this.oneTimePasswordLink&&(this.shouldEnableOTPWithoutRedirection?this.otp_uri=b.otp_uri:this.oneTimePasswordLink.setAttribute("href",b.otp_uri),this.displayOTPLink=!0);a()}.bind(this)}])},_getBlankEmailErrorFBT:function(){var a=p._("Sign up for an account."),b=n.create("a");b.setAttribute("href",this.onErrorRegURI);n.setContent(b,a);return p._("The email address or phone number that you've entered doesn't match any account. {reg_uri}",[p._param("reg_uri",b)])},_onEnteringCP:function(){__p&&__p();this._logActionIfEnabled("clicked_next");if(this.emailInput.value.trim()===""){this._logActionIfEnabled("clicked_next_user_identifier_blank");n.setContent(this.notice,this._getBlankEmailErrorFBT());k.show(this.notice);x.set(this.emailInput,"error");m.set(this.emailInput,"error",!0);w.popSoftState(M);return}this._logActionIfEnabled("clicked_next_user_identifier_filled");x.unset(this.emailInput);m.set(this.emailInput,"error",!1);m.get(this.passwordInput,"error",!1)||k.hide(this.notice);this.nextButton.disabled=!0;this._enableProgressBar();this._populateProfileInfo(this._goToPasswordStep.bind(this));return},_onBackToCP:function(){m.get(this.passwordInput,"error",!1)&&(k.hide(this.notice),m.set(this.passwordInput,"error",!1),k.removeClass(this.passwordInput,J)),this._goToIdentificationStep()},_hideAll:function(a){a.forEach(function(a){return k.hide(a)})},_showAll:function(a){a.forEach(function(a){return k.show(a)})},_rerenderAuthStepCPDisplay:function(){if(m.get(this.loginForm,"step","")!==L)return;this.displayUserName&&(this.cpText&&k.hide(this.cpText),this.cpDisplayLabel&&k.hide(this.cpDisplayLabel),this.userName&&k.show(this.userName));this.profilePicElem&&k.conditionShow(this.profilePicElem,!!this.displayProfilePic);this.oneTimePasswordLink&&k.conditionShow(this.oneTimePasswordLink,!!this.displayOTPLink);this.otpSentMsg&&(k.conditionShow(this.otpSentMsg,!!this.shouldDisplayOTPMsg),this.shouldDisplayOTPMsg?(this.passwordInputDOM.setAttribute("placeholder",this.otpPasswordPlaceholder),this._animateScrollToElem(this.passwordFieldLabel)):this.passwordInputDOM.setAttribute("placeholder",this.originalPasswordPlaceholder));var a=this.displayUserName||this.displayProfilePic;k.conditionShow(this.stepTwoCPDisplayContainer,!!a);k.conditionShow(this.emailComponentsWrapper,!a)},_showEditableCPFieldOnAuthStep:function(){this.displayProfilePic=!1,this.displayUserName=!1,this.displayOTPLink=!1,this._rerenderAuthStepCPDisplay(),this.emailInput.focus()},_goToPasswordStep:function(){__p&&__p();m.set(this.loginForm,"step",L);this.prefillContactpointHiddenInput.value!==this.emailInput.value&&(this.passwordInputDOM.value="");if(this.shouldClearPasswordIfOnlyPasswordPrefilled){var a=q(s.HAD_CP_PREFILLED),b=q(s.HAD_PASSWORD_PREFILLED);a!=null&&b!=null&&(a.value==null||a.value==="false")&&b.value==="true"&&(this.shouldClearPasswordIfOnlyPasswordPrefilled=!1,this.passwordInputDOM.value="")}this._hideAll(this.identifyStepElements);this._showAll(this.passwordStepElements);this._logActionIfEnabled("password_entry_viewed");this._rerenderAuthStepCPDisplay();this.moreLinks&&k.addClass(this.moreLinks,"_2pie");k.removeClass(this.passwordInput,"_1-z5");k.removeClass(this.passwordComponentWrapper,"_1-z5");this.passwordInputDOM.removeAttribute("tabindex");this.cpText&&n.setContent(this.cpText,this.emailInput.value);this.passwordInputDOM.focus()},_resetProgressBar:function(){this.progressBar.style.transitionDuration="0ms",this.progressBar.style["-webkit-transition-duration"]="0ms",this.progressBar.style["-moz-transition-duration"]="0ms",this.progressBar.style.transform="translateX(0%)",this.progressBar.style["-webkit-transform"]="translateX(0%)",this.progressBar.style["-moz-transform"]="translateX(0%)"},_enableProgressBar:function(){this.progressBar.style.transitionDuration="1000ms",this.progressBar.style["-webkit-transition-duration"]="1000ms",this.progressBar.style["-moz-transition-duration"]="1000ms",this.progressBar.style.transform="translateX(100%)",this.progressBar.style["-webkit-transform"]="translateX(100%)",this.progressBar.style["-moz-transform"]="translateX(100%)"},_goToIdentificationStep:function(){m.set(this.loginForm,"step",K),this._resetProgressBar(),this.displayUserName=!1,this.displayProfilePic=!1,this.displayOTPLink=!1,this.cpText&&k.show(this.cpText),this.cpDisplayLabel&&k.show(this.cpDisplayLabel),this.userName&&(n.setContent(this.userName,""),k.hide(this.userName)),k.addClass(this.passwordInput,"_1-z5"),k.addClass(this.passwordComponentWrapper,"_1-z5"),this.passwordInputDOM.setAttribute("tabindex",-1),this._hideAll(this.passwordStepElements),this._showAll(this.identifyStepElements),!m.get(this.emailInput,"error",!1)?this._logActionIfEnabled("clicked_back"):n.hide(this.upsell),this.moreLinks&&k.removeClass(this.moreLinks,"_2pie"),this.emailInput.focus()},_handleNextButtonClick:function(){this.passwordInputDOM.value.trim()!==""&&this.prefillContactpointHiddenInput&&this.prefillContactpointHiddenInput.value===this.emailInput.value&&(this.hadCPPrefilled=!0),w.pushSoftState(M)},_onLoginResponse:function(a){__p&&__p();v.setEnabled(this.loginButton,!0);this.isTwoStepsLogin&&v.setEnabled(this.nextButton,!0);this.loginButtonAlt!==null&&v.setEnabled(this.loginButtonAlt,!0);if(!a.payload)return;var b=a.payload;b[y.PASSWORD_INPUT].error?this.numPasswordErrorAttempts++:this.numPasswordErrorAttempts=0;b[y.EMAIL_INPUT].unrecognized&&this.unrecognizedContactpointErrorCount++;this.rapidFeedbackUri&&this.numPasswordErrorAttempts==2&&r(this.rapidFeedbackUri);b[y.NOTICE]&&(b[y.CHANGE_NOTICE_BACKGROUND]?(n.replace(this.notice,b[y.NOTICE]),this.notice=n.find(this.root,"div",y.NOTICE)):(n.setContent(this.notice,b[y.NOTICE]),this.isTwoStepsLogin&&this.shouldEnableInlineError&&(b[y.EMAIL_INPUT].error?n.insertAfter(this.emailInput,this.notice):b[y.PASSWORD_INPUT].error&&n.insertAfter(this.passwordInput,this.notice)),k.show(this.notice)));if(this.emailInput!==null){b[y.EMAIL_INPUT].error?(x.set(this.emailInput,"error"),m.set(this.emailInput,"error",!0),this.isTwoStepsLogin&&(this.shouldDisplayOTPMsg=!1,this._rerenderAuthStepCPDisplay())):(x.unset(this.emailInput),m.set(this.emailInput,"error",!1));var c=b[y.EMAIL_INPUT].value;c?(this.emailInput.value=c,this.isTwoStepsLogin&&this.cpText&&n.setContent(this.cpText,c)):this.emailInput.value=""}this.passwordInput!==null&&(n.find(this.passwordInput,"input").value="",E.invoke("m:passwordinput:autoclear",A.INPUT),b[y.PASSWORD_INPUT].error?(m.set(this.passwordInput,"error",!0),k.addClass(this.passwordInput,J),this.isTwoStepsLogin&&m.get(this.loginForm,"step","")===K&&w.pushSoftState(M),this._populateProfileInfo(this._rerenderAuthStepCPDisplay.bind(this))):(m.set(this.passwordInput,"error",!1),k.removeClass(this.passwordInput,J)));this._autoFocusIfNeeded(a.payload);this.upsell!==null&&n.hide(this.upsell)},_onLoginFromRegResponse:function(a){r(this.regURI)},redirect:function(a){window.location.replace(a)}};e.exports=a}),null);
__d("MLoginView",["DOM","DeferredCookie","MButton","CSS","cx"],(function(a,b,c,d,e,f,g,h,i,j,k){a={disableOnSubmit:function(a,b){g.listen(a,"submit",null,function(){h.flushAllCookies(),i.setEnabled(b,!1),setTimeout(i.setEnabled.bind(null,b,!0),15e3)})},showForm:function(a,b){g.listen(a,"click",null,function(c){g.remove(a),j.removeClass(b,"_7tb")})}};e.exports=a}),null);
__d("MPasswordPlainTextToggle",["CSS","MPasswordPlainTextToggleSigils","Stratcom","invariant"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";a={init:function(a,b,c,d){c!==null&&d!==null||j(0),i.listen("click",h.TOGGLE,function(b){a.type=="password"?(a.type="text",g.hide(c),g.show(d)):(a.type="password",g.hide(d),g.show(c)),b.kill()}),i.listen(["m:passwordinput:autoclear","input"],h.INPUT,function(c){a.value==""?g.hide(b):g.show(b)})}};e.exports=a}),null);
__d("XAsyncPushMuteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("https://m.facebook.com/notifications/settings/push/mute/",{appid:{type:"Int",required:!0},push_endpoint:{type:"String",required:!0},mute_for:{type:"Enum",enumType:0}})}),null);
__d("XAsyncPushMuteStateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("https://m.facebook.com/notifications/settings/push/mute/state/",{appid:{type:"Int",required:!0},push_endpoint:{type:"String",required:!0}})}),null);
__d("XBrowserPushDisabledController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("https://m.facebook.com/notifications/client/push/disabled/",{})}),null);
__d("BrowserPushMuteOptions",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ZERO:0,FIFTEEN_MINUTES:900,THIRTY_MINUTES:1800,FORTY_FIVE_MINUTES:2700,ONE_HOUR:3600,TWO_HOURS:7200,EIGHT_HOURS:28800,ONE_DAY:86400})}),null);
__d("BrowserPushCommands",[],(function(a,b,c,d,e,f){a="browser_push_ack";b="browser_push_redirect";c="browser_push_window_visible";d={ACK:a,REDIRECT:b,WINDOW_VISIBLE:c};e.exports=d}),null);
__d("BrowserPushMessageHandler",["BrowserPushCommands","BrowserPushMessageRedirectUtil","EventListener","URI","URISchemes","isFacebookURI"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();function m(event){__p&&__p();if(event.data.command&&event.data.command===g.REDIRECT){if(window.onbeforeunload()===undefined)event.ports[0].postMessage({command:g.ACK,success:!0});else{event.ports[0].postMessage({command:g.ACK,success:!1});return}var a=event.data.uri;if(/^([^.:/?#]+):/.test(a)&&!k.isAllowed(/^([^.:/?#]+):/.exec(a)[1])||!l(new j(a)))throw new Error("goURI: URI scheme rejected, URI: "+a);h(a)&&(window.location.href=a)}}a={registerRedirectHandler:function(){i.listen(window,"message",function(event){event.origin===""&&m(event)}),navigator.serviceWorker&&navigator.serviceWorker.addEventListener&&navigator.serviceWorker.addEventListener("message",function(event){(navigator.serviceWorker&&navigator.serviceWorker.controller&&event.target&&event.target.controller&&event.target.controller===navigator.serviceWorker.controller||new RegExp("^"+window.location.protocol+"//"+window.location.host+"$").test(event.origin))&&m(event)})}};e.exports=a}),null);
__d("BrowserPushVisibilityChanger",["BrowserPushCommands","ClientServiceWorkerMessage","Visibility"],(function(a,b,c,d,e,f,g,h,i){function j(){new h(g.WINDOW_VISIBLE,null).sendViaController()}a={listenForVisibility:function(){i.isHidden()||j(),i.addListener(i.VISIBLE,j)}};e.exports=a}),null);
__d("PushRegistration",["Promise","BrowserPushMessageHandler","BrowserPushMuteOptions","BrowserPushVisibilityChanger","ServiceWorkerRegistration","XAsyncPushMuteController","XAsyncPushMuteStateController","emptyFunction","promiseDone"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){__p&&__p();var p=window.Notification,q=new Map();r.get=function(a,b){"use strict";if(q.has(b))return q.get(b);a=new r(a,b);q.set(b,a);return a};function r(a,b){"use strict";this.$3=a,this.appID=b,!r.$1&&!r.$2&&(r.$1=!1,r.$2=!1)}r.prototype.getPushSubscription=function(){"use strict";return new g(function(a,b){r.pushPermissionIsDenied()&&b(new Error("No permission or not supported")),k.getWorkerRegistration(this.$3).then(function(c){if(!c){a(null);return}c.pushManager.getSubscription().then(function(b){a(b)})["catch"](b)})["catch"](b)}.bind(this))};r.prototype.$4=function(a){"use strict";var b=a.endpoint;"subscriptionId"in a&&!new RegExp("/"+a.subscriptionId+"$").test(b)&&(b+="/"+a.subscriptionId);return b};r.prototype.$5=function(a,b,c,d){"use strict";__p&&__p();var e=this.$4(c);a=a.getURIBuilder().getURI();b=new b(a);a=null;c.toJSON?a=c.toJSON().keys:c.keys&&(a=c.keys);b.setData({app_id:this.appID,push_endpoint:e,subscription_keys:JSON.stringify(a)});b.setMethod("post");b.setHandler&&b.setHandler(function(a){a.payload&&a.payload.session_change&&d()});b.send()};r.prototype.getMutedUntilInServer=function(a){"use strict";__p&&__p();return new g(function(b,c){__p&&__p();this.getPushSubscription().then(function(d){if(d){d=this.$4(d);d=m.getURIBuilder().setString("push_endpoint",d).setInt("appid",this.appID).getURI();d=new a(d);d.listen("done",function(a){b(a.payload.muteUntilTimestampSec)});d.send()}else c("cannot check mute status for unsubscribed endpoint")}.bind(this))["catch"](c)}.bind(this))};r.prototype.muteNotifications=function(a,b){"use strict";__p&&__p();return new g(function(c,d){__p&&__p();this.getPushSubscription().then(function(e){__p&&__p();if(e){e=this.$4(e);e=l.getURIBuilder().setEnum("mute_for",a).setString("push_endpoint",e).setInt("appid",this.appID).getURI();e=new b(e);e.setMethod("POST");e.listen("done",function(b){a!==i.ZERO&&b.payload.muteUntilTimestampSec===0?d("operation failed in server"):c(b.payload.muteUntilTimestampSec)});e.send()}else d("no subscription found")}.bind(this))["catch"](d)}.bind(this))};r.prototype.getSubscription=function(){"use strict";return new g(function(a,b){this.getPushSubscription().then(function(b){b?a(this.$4(b)):a(null)}.bind(this))["catch"](b)}.bind(this))};r.prototype.maybeRegisterPushAgain=function(a,b,c){"use strict";return new g(function(d,e){this.getPushSubscription().then(function(e){e?(this.$5(a,b,e,c),d(this.$4(e))):d(null)}.bind(this))["catch"](function(){d(null)})}.bind(this))};r.prototype.$6=function(a,b,c){"use strict";__p&&__p();return new g(function(d,e){__p&&__p();if(r.$2&&!c){e(new Error("sending disable info already"));return}r.$2=!0;var f=a.getURIBuilder().getURI();f=new b(f.toString());f.setData({appid:this.appID,from_browser_settings:c});f.setMethod("post");f.listen?(f.listen("finally",d),f.listen("fail",function(){r.$2=!1,e()})):f.setErrorHandler&&f.setHandler?(f.setErrorHandler(function(){r.$2=!1,e()}),f.setHandler(d)):d();f.send()}.bind(this))};r.prototype.isPushRegistered=function(a,b,c,d){var e=arguments.length<=4||arguments[4]===undefined?!1:arguments[4],f=arguments.length<=5||arguments[5]===undefined?n:arguments[5],i=arguments.length<=6||arguments[6]===undefined?!1:arguments[6];h.registerRedirectHandler();return new g(function(g,h){this.getPushSubscription().then(function(h){g(!!h||a&&!r.pushPermissionIsPending()),h?e?self.$5(b,d,h,f):j.listenForVisibility():!h&&a&&(r.pushPermissionIsOn()?this.registerPush(b,d,f,i)["catch"](function(){}):this.$6(c,d,!1))}.bind(this))["catch"](function(){a&&this.$6(c,d,!1),i&&k.unregisterControllingWorker(),h()}.bind(this))}.bind(this))};r.prototype.$7=function(){"use strict";return new g(function(a,b){p.requestPermission(a)})};r.prototype.registerPushAndWaitForEndpoint=function(a,b,c,d){"use strict";return new g(function(e,f){this.$8(a,b,c,!0,null,d).then(function(a){if(typeof a!=="string"){f(new Error("registerPushImpl did not return an endpoint"));return}e(a)})["catch"](f)}.bind(this))};r.prototype.registerPushOnKaiOS=function(a,b,c){"use strict";return new g(function(d,e){c.waitForKaiOS().done(function(){c.registerPush(function(c){c=JSON.parse(c.get("push_endpoint"));this.$5(a,b,c,n);d(this.$4(c))}.bind(this))}.bind(this))}.bind(this))};r.prototype.registerPush=function(a,b){var c=arguments.length<=2||arguments[2]===undefined?n:arguments[2],d=arguments.length<=3||arguments[3]===undefined?!1:arguments[3];return this.registerPushWithFinishedCallBack(a,b,c,null,d)};r.prototype.registerPushWithFinishedCallBack=function(a,b,c,d,e){"use strict";return new g(function(f,g){this.$8(a,b,c,!1,d,e).then(function(a){if(typeof a!=="boolean"){g(new Error("registerPushImpl did not return a boolean"));return}f(a)})["catch"](g)}.bind(this))};r.prototype.$8=function(a,b,c,d,e,f){"use strict";__p&&__p();if(r.$1)return new g(function(a,b){b(new Error("registering already"))});if(!self.PushManager)return g.reject(new Error("PushManager not found."));r.$1=!0;return new g(function(h,i){__p&&__p();var l=k.registerWorkerIfUnregistered(this.$3),m=this.$7();g.all([l,m]).then(function(g){var k=g[0];if(!r.pushPermissionIsOn()){f&&k.unregister();throw new Error("Push permission was denied")}d||h(!0);k.pushManager.subscribe({userVisibleOnly:!0}).then(function(f){d&&h(this.$4(f)),this.$5(a,b,f,c),e&&e(),j.listenForVisibility()}.bind(this))["catch"](function(a){r.$1=!1,f&&k.unregister(),i(a)})}.bind(this))["catch"](function(a){r.$1=!1,i(a)})}.bind(this))};r.prototype.unregisterPushAndSWOnKaiOS=function(a,b,c,d){"use strict";return new g(function(e,f){this.$6(a,b,d).then(function(){c.unregisterPush(),e()})["catch"](f)}.bind(this))};r.prototype.unregisterPushAndSW=function(a,b){"use strict";return new g(function(c,d){this.$6(a,b,!0).then(function(){o(k.unregisterControllingWorker(),c)})["catch"](d)}.bind(this))};r.prototype.unregisterPushOnly=function(a,b){"use strict";return new g(function(c,d){this.getPushSubscription().then(function(e){e?e.unsubscribe().then(this.$6(a,b,!0)).then(function(){c(!0)})["catch"](d):d()}.bind(this))["catch"](d)}.bind(this))};r.pushPermissionIsPending=function(){"use strict";return window.Notification&&window.Notification.permission==="default"};r.pushPermissionIsOn=function(){"use strict";return window.Notification&&window.Notification.permission==="granted"};r.pushPermissionIsDenied=function(){"use strict";return window.Notification&&window.Notification.permission==="denied"};e.exports=r}),null);
__d("ServiceWorkerLoginAndLogout",["ClientServiceWorkerMessage"],(function(a,b,c,d,e,f,g){function h(a){new g(a,null).sendViaController()}a={login:function(){h("login")},logout:function(){h("logout")}};e.exports=a}),null);